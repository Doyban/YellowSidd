Quintus.ActionPlatformerEnemy=function(i){i.component("commonEnemy",{added:function(){var t=this.entity;t.on("bump.left, bump.right, bump.bottom",function(t){t.obj.isA("Player")&&(t.obj.destroy(),i.stageScene("endGame",1,{label:"You died!"}),i.audio.play("kill-enemy.mp3"))}),t.on("bump.top",function(t){t.obj.isA("Player")&&(t.obj.p.vy=-100,i.audio.play("kill-enemy.mp3"),this.destroy())})}}),i.Sprite.extend("GroundEnemy",{init:function(i){this._super(i,{vx:-50,defaultDirection:"left"}),this.add("2d, aiBounce, commonEnemy")},step:function(t){var p,s=this.p.vx/Math.abs(this.p.vx),n=i.stage().locate(this.p.x,this.p.y+this.p.h/2+1,i.SPRITE_DEFAULT),e=i.stage().locate(this.p.x+s*this.p.w/2+s,this.p.y+this.p.h/2+1,i.SPRITE_DEFAULT);e instanceof i.TileLayer&&(p=!0),!p&&n&&(this.p.vx>0?"right"==this.p.defaultDirection?this.p.flip="x":this.p.flip=!1:"left"==this.p.defaultDirection?this.p.flip="x":this.p.flip=!1,this.p.vx=-this.p.vx)}}),i.Sprite.extend("VerticalEnemy",{init:function(i){this._super(i,{vy:-100,rangeY:40,gravity:0}),this.add("2d, commonEnemy"),this.p.initialY=this.p.y,this.p.initialVy=this.p.vy,this.p.vyDirection=this.p.vy/Math.abs(this.p.vy);var t=this;this.on("bump.top, bump.bottom",function(i){t.p.vy=-Math.abs(t.p.initialVy)*t.p.vyDirection,t.p.vyDirection=t.p.vy/Math.abs(t.p.vy)})},step:function(i){this.p.y-this.p.initialY>=this.p.rangeY&&this.p.vy>0?(this.p.vy=-this.p.vy,this.p.vyDirection*=-1):-this.p.y+this.p.initialY>=this.p.rangeY&&this.p.vy<0&&(this.p.vy=-this.p.vy,this.p.vyDirection*=-1)}})};